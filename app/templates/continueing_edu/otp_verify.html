{% extends "continueing_edu/base_frontend.html" %}

{% block title %}{{ texts.university_name }} - {{ texts.login_page_title }}{% endblock %}

{% block extra_css %}
{{ super() }}
<style>
          /* Custom styles for rounded corners and shadows */
          .rounded-md {
                    border-radius: 0.375rem;
          }

          .rounded-lg {
                    border-radius: 0.5rem;
          }

          .rounded-full {
                    border-radius: 9999px;
          }

          .shadow-sm {
                    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
          }

          .shadow-lg {
                    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
          }

          .mb-4 {
                    margin-bottom: 1rem;
          }

          .mb-6 {
                    margin-bottom: 1.5rem;
          }

          .mt-4 {
                    margin-top: 1rem;
          }

          .py-4 {
                    padding-top: 1rem;
                    padding-bottom: 1rem;
          }

          .px-4 {
                    padding-left: 1rem;
                    padding-right: 1rem;
          }

          .p-8 {
                    padding: 2rem;
          }

          /* Colors */
          .has-text-gray-800 {
                    color: #1f2937;
          }

          .has-text-gray-700 {
                    color: #374151;
          }

          .has-text-indigo-700 {
                    color: #4338ca;
          }

          .has-text-indigo-600 {
                    color: #4f46e5;
          }

          .has-text-white {
                    color: #ffffff;
          }

          .has-background-white {
                    background-color: #ffffff;
          }

          .has-background-indigo-600 {
                    background-color: #4f46e5;
          }

          .hover\:has-background-indigo-700:hover {
                    background-color: #4338ca;
          }

          .border {
                    border-width: 1px;
                    border-style: solid;
          }

          .border-gray-200 {
                    border-color: #e5e7eb;
          }

          .is-flex {
                    display: flex;
          }

          .is-flex-direction-column {
                    flex-direction: column;
          }

          .is-justify-content-space-between {
                    justify-content: space-between;
          }

          .is-align-items-center {
                    align-items: center;
          }

          .is-centered {
                    justify-content: center;
          }

          .is-fullwidth {
                    width: 100%;
          }

          /* Custom styles for language buttons */
          .language-button {
                    margin-left: 0.5rem;
                    min-width: 40px;
                    text-align: center;
          }

          .language-button.is-active {
                    background-color: #4338ca;
                    color: white;
                    border-color: #4338ca;
          }

          .language-button:not(.is-active) {
                    background-color: #e0e7ff;
                    color: #4338ca;
                    border-color: #e0e7ff;
          }

          .language-button:not(.is-active):hover {
                    background-color: #c7d2fe;
                    border-color: #c7d2fe;
          }

          /* Style for the university logo */
          .university-logo {
                    max-height: 2.5rem;
                    margin-right: 0.5rem;
                    width: auto;
          }
</style>
{% endblock %}

{% block content %}
<section class="section py-16">
          <div class="container mt-6 mb-6">
                    <div class="box max-w-2xl mx-auto p-8 rounded-lg shadow-md border border-gray-200">
                              <h1 class="title is-3 has-text-centered mb-5">ลงทะเบียนสำเร็จ!</h1>
                              <p class="is-size-5 mb-4 has-text-centered">
                                        ระบบได้ส่งรหัส OTP 6 หลักไปยังอีเมลของคุณแล้ว
                                        กรุณากรอกรหัสเพื่อยืนยันการสมัครสมาชิกให้สมบูรณ์
                              </p>
                              <form method="post" action="{{ url_for('continuing_edu.otp_verify', lang=current_lang) }}"
                                        class="mt-5">

                                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
                                        <div class="field mb-4 has-text-centered">
                                                  <label class="label">รหัส OTP (6 หลัก)</label>
                                                  <div class="control">
                                                            <input class="input is-large has-text-centered" type="text"
                                                                      name="otp_code" maxlength="6" pattern="\d{6}"
                                                                      required autofocus>
                                                  </div>
                                        </div>
                                        <input type="hidden" name="username" value="{{ username }}">
                                        <div class="field mt-5 has-text-centered">
                                                  <button class="button is-info is-rounded has-background-indigo-600 has-text-white"
                                                            type="submit">
                                                            ยืนยัน OTP
                                                  </button>
                                        </div>
                              </form>
                              <div class="has-text-centered mt-4">
                                        <small>ไม่ได้รับอีเมล? <a href="#" onclick="location.reload();return false;">ขอ
                                                            OTP
                                                            ใหม่</a></small>
                              </div>
                    </div>
          </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
          document.addEventListener('DOMContentLoaded', () => {
                    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);
                    if ($navbarBurgers.length > 0) {
                              $navbarBurgers.forEach(el => {
                                        el.addEventListener('click', () => {
                                                  const target = el.dataset.target;
                                                  const $target = document.getElementById(target);
                                                  el.classList.toggle('is-active');
                                                  $target.classList.toggle('is-active');
                                        });
                              });
                    }
                    // Close flash messages
                    (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
                              const $notification = $delete.parentNode;
                              $delete.addEventListener('click', () => {
                                        $notification.parentNode.removeChild($notification);
                              });
                    });
          });
</script>
{% endblock %}