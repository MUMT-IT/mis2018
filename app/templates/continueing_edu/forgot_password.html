{% extends "continueing_edu/base_frontend.html" %}

{% block title %}{{ texts.get('forgot_password', 'ลืมรหัสผ่าน' if current_lang == 'th' else 'Forgot Password') }}{%
endblock %}

{% block extra_css %}
{{ super() }}
<style>
  :root {
    --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --card-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  }

  .forgot-password-container {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
  }

  .forgot-hero {
    background: var(--primary-gradient);
    padding: 2rem 1.5rem;
    border-radius: 16px 16px 0 0;
    text-align: center;
    color: white;
  }

  .hero-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
  }

  .hero-title {
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 0.5rem;
  }

  .hero-subtitle {
    font-size: 1rem;
    opacity: 0.95;
  }

  .modern-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 16px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: var(--card-shadow);
    max-width: 500px;
    width: 100%;
    overflow: hidden;
  }

  .card-body {
    padding: 2.5rem;
  }

  .modern-input {
    border: 2px solid #e0e7ff;
    border-radius: 8px;
    padding: 0.75rem 1rem;
    font-size: 1rem;
    transition: all 0.3s ease;
    background: white;
  }

  .modern-input:focus {
    border-color: #667eea;
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    outline: none;
  }

  .modern-label {
    font-weight: 600;
    color: #374151;
    margin-bottom: 0.5rem;
    display: block;
  }

  .field-icon {
    color: #667eea;
    margin-right: 0.5rem;
  }

  .btn-primary {
    background: var(--primary-gradient);
    border: none;
    color: white;
    padding: 0.875rem 2rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    width: 100%;
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(102, 126, 234, 0.4);
  }

  .btn-secondary {
    background: white;
    border: 2px solid #e0e7ff;
    color: #667eea;
    padding: 0.875rem 2rem;
    border-radius: 8px;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;
    width: 100%;
    margin-top: 0.75rem;
  }

  .btn-secondary:hover {
    background: #f5f7ff;
    border-color: #667eea;
  }

  .info-box {
    background: rgba(102, 126, 234, 0.05);
    border-left: 4px solid #667eea;
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    font-size: 0.95rem;
  }

  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-in {
    animation: fadeInUp 0.6s ease-out;
  }
</style>
{% endblock %}

{% block content %}
<div class="forgot-password-container">
  <div class="modern-card animate-in">
    <div class="forgot-hero">
      <div class="hero-icon">
        <i class="fas fa-key"></i>
      </div>
      <h1 class="hero-title">{{ texts.get('forgot_password', 'ลืมรหัสผ่าน' if current_lang == 'th' else 'Forgot
        Password') }}</h1>
      <p class="hero-subtitle">
        {{ texts.get('forgot_password_subtitle', 'กรอกอีเมลหรือชื่อผู้ใช้เพื่อรับรหัส OTP' if current_lang == 'th' else
        'Enter your email or username to receive OTP code') }}
      </p>
    </div>

    <div class="card-body">
      <div class="info-box">
        <i class="fas fa-info-circle" style="color: #667eea; margin-right: 0.5rem;"></i>
        {{ texts.get('otp_will_be_sent', 'รหัส OTP จะถูกส่งไปยังอีเมลที่ลงทะเบียนไว้' if current_lang == 'th' else 'OTP
        code will be sent to your registered email') }}
      </div>

      <form method="POST" action="{{ url_for('continuing_edu.forgot_password', lang=current_lang) }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />

        <div class="field">
          <label class="modern-label">
            <i class="fas fa-envelope field-icon"></i>
            {{ texts.get('email_label', 'อีเมล' if current_lang == 'th' else 'Email') }}
          </label>
          <div class="control has-icons-left">
            <input class="input modern-input" type="email" name="email"
              placeholder="{{ texts.get('email_placeholder', 'your.email@example.com' if current_lang == 'en' else 'อีเมลของคุณ') }}"
              required autofocus>
            <span class="icon is-small is-left">
              <i class="fas fa-envelope"></i>
            </span>
          </div>
          <p class="help" style="margin-top: 0.5rem; color: #6b7280;">
            {{ texts.get('forgot_password_help', 'กรอกอีเมลที่ลงทะเบียนไว้เพื่อรับรหัส OTP' if current_lang == 'th' else
            'Enter your registered email to receive OTP code') }}
          </p>
        </div>
        <div class="field" style="margin-top: 1.5rem;">
          <button class="btn-primary" type="submit">
            <i class="fas fa-paper-plane"></i>
            <span>{{ texts.get('send_otp', 'ส่งรหัส OTP' if current_lang == 'th' else 'Send OTP Code') }}</span>
          </button>
          <a href="{{ url_for('continuing_edu.login', lang=current_lang) }}" class="button btn-secondary">
            <i class="fas fa-arrow-left"></i>
            <span>{{ texts.get('back_to_login', 'กลับไปหน้าเข้าสู่ระบบ' if current_lang == 'th' else 'Back to Login')
              }}</span>
          </a>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Close notification
    document.querySelectorAll('.notification .delete').forEach(($delete) => {
      $delete.addEventListener('click', () => {
        $delete.parentNode.remove();
      });
    });
  });
</script>
{% endblock %}