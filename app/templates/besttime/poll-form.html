{% extends "base.html" %}

{% block page_content %}
<section class="section">
    <h1 class="title is-size-3">{{poll.title}}</h1>
    <div class="columns">
        <div class="column">
            <form method="post">
                <table class="table is-striped is-bordered">
                    {% for field in form.date_time_slots %}
                    <tr>
                        <td>
                            <div class="field">
                                <div class="control">
                                    {{ field.date.data.strftime('%-d %a %b %Y') }}
                                    {{ field.date(type="hidden") }}
                                    {{field.time_slots()}}
                                </div>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </table>
                <div class="field is-grouped">
                    <div class="control">
                        <button class="button is-success" type="submit">Submit</button>
                    </div>
                    <div class="control">
                        <a class="button is-light" href="{{url_for('index')}}">Back</a>
                    </div>
                </div>
            </form>
        </div>
        <div class="column">
            {% for message in poll.messages %}
            <article class="media">
                <div class="media-content">
                    <div class="tag is-large is-light is-warning">
                        {{message.message}}
                    </div>
                    <br/>
                    <p>
                        <strong><small>{{message.voter}}</small></strong> <small>@{{message.created_at}}</small>
                    </p>
                </div>
            </article>
            {% endfor %}
            <br>
            <a class="button is-link" href="{{url_for('leave_message', poll_id=poll.id)}}">Leave Message</a>
        </div>
    </div>
</section>
{% endblock %}